
<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Vocabul√°rio Japon√™s</title>
<style>body{font-family:'Segoe UI',sans-serif;background:#e6f2ff;margin:0;text-align:center;padding:20px}h1{color:#003366}.menu,.mode-select,.game-screen{display:none}.visible{display:block !important}button{font-size:20px;margin:10px;padding:12px 24px;border-radius:10px;border:2px solid #003366;background-color:#f0f0f0;color:#003366;cursor:pointer}#question{font-size:48px;margin-top:30px}#hiragana{font-size:24px;color:#f0f0f0;margin-bottom:20px}.options{display:flex;flex-wrap:wrap;justify-content:center;gap:15px;margin:20px 0}.options button.correct{background-color:#4caf50;color:white}.options button.incorrect{background-color:#f44336;color:white}#progressBar{width:90%;height:8px;background:#ccc;position:fixed;bottom:48px;left:5%;border-radius:4px;}#progress{height:100%;width:0%;background:#4caf50;transition:width 0.3s ease}button{font-size:clamp(14px,2.5vw,24px);white-space:normal;word-break:break-word;overflow-wrap:anywhere;max-width:100%}#question{font-size:clamp(36px,8vw,64px); word-break:break-word; margin-bottom: 10px;}#hiragana{font-size:clamp(20px,4vw,28px); color:#111; margin-bottom: 20px;}
h2 {
  color: #003366;
  font-size: clamp(22px, 4vw, 32px);
  margin-bottom: 20px;
}
button {
  font-size: clamp(16px, 2vw, 22px);
  padding: 12px 20px;
  margin: 10px;
  border-radius: 12px;
  border: none;
  background-color: #66b2ff;
  color: white;
  transition: background-color 0.2s;
}
button:hover {
  background-color: #007acc;
}

.options {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.menu {
  opacity: 0;
  transition: opacity 0.3s ease;
}
.menu.visible {
  display: block !important;
  opacity: 1;
}

body {
  padding-bottom: 60px; /* espa√ßo para a barra de voltar */
}
.menu {
  overflow: visible !important;
}

body { padding-bottom: 60px; }
#customWordList { box-sizing: border-box; }
/* Melhorias no layout do menu de adicionar/editar */
#addWordMenu button {
  display: inline-block;
  margin: 10px 5px;
  font-size: clamp(14px, 2.5vw, 18px);
  padding: 10px 16px;
  max-width: 100%;
}

#addWordMenu input, #addWordMenu select {
  font-size: 16px;
  padding: 8px;
  margin-top: 5px;
  margin-bottom: 10px;
  width: 100%;
  box-sizing: border-box;
}

#addWordMenu h2 {
  font-size: clamp(22px, 4vw, 30px);
  margin-bottom: 20px;
  text-align: center;
}

/* Evita que o bot√£o inferior sobreponha conte√∫do */
#addWordMenu {
  padding-bottom: 80px;
}

.main-title {
  font-size: clamp(32px, 7vw, 56px);
  color: #003366;
  animation: pulse 2s infinite;
  margin-bottom: 10px;
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.85; }
  100% { transform: scale(1); opacity: 1; }
}


/* Melhorias visuais */
#modeSelectFirst button {
  min-width: 260px;
  display: block;
  margin: 12px auto;
}

#modeSelectFirst ruby {
  display: inline-block;
  text-align: center;
}

.main-title {
  font-size: clamp(36px, 8vw, 64px);
  font-weight: 800;
  font-family: 'Segoe UI', 'Arial Black', sans-serif;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

#modeSelectFirst button {
  min-width: 280px;
  min-height: 60px;
  margin: 12px auto;
  text-align: center;
}

#modeSelectFirst ruby {
  display: inline-block;
  text-align: center;
  line-height: 1.2;
  font-size: 95%;
}

.main-title {
  font-size: clamp(38px, 8vw, 66px);
  font-weight: 900;
  font-family: 'Segoe UI', 'Arial Black', sans-serif;
  letter-spacing: 1.5px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
  animation: pulseTitle 2.4s ease-in-out infinite;
}

@keyframes pulseTitle {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.04); opacity: 0.92; }
}

/* Redu√ß√£o de espa√ßamento geral */
body {
  padding-top: 10px;
  padding-bottom: 30px;
  margin: 0;
}

#modeSelectFirst {
  padding-top: 10px;
  padding-bottom: 10px;
}

#modeSelectFirst img {
  margin-bottom: 4px !important;
}

.main-title {
  margin-top: 4px;
  margin-bottom: 12px;
}

/* Bot√µes mais compactos */
#modeSelectFirst button {
  padding: 10px 18px;
  min-height: 56px;
}

/* Redu√ß√£o de espa√ßamento no furigana */
ruby {
  font-size: 90%;
  line-height: 1;
  ruby-position: over;
}

#modeSelectFirst ruby {
  display: inline-block;
  text-align: center;
  font-size: 90%;
  line-height: 1.1;
}

#modeSelectFirst rt {
  font-size: 0.55em;
  line-height: 1;
}

#modeSelectFirst button div {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

#modeSelectFirst ruby {
  display: inline;
  font-size: 100%;
  line-height: 1;
  ruby-position: over;
}

#modeSelectFirst rt {
  font-size: 0.5em;
  line-height: 1;
  color: #111 !important;
}

ruby {
  font-size: 100%;
  line-height: 1;
  ruby-position: over;
  white-space: nowrap;
}

rt {
  font-size: 0.5em;
  line-height: 1;
  color: #111 !important;
}

.furigana { color: #111 !important; }
</style>
</head>
<body>
<div class="menu visible" id="modeSelectFirst"><img alt="Spring School" onclick="show('modeSelectFirst')" src="https://springschool.me/wp-content/uploads/2020/12/SPRING-SCHOOL-LOGO-01.png" style="height: 80px; margin-bottom: 10px;; cursor: pointer;"/><h1 class="main-title">„Åì„Å®„Å∞Á∑¥Áøí</h1><button onclick="setModeAndGo('kanjiHiraToPt')"><div style="font-size:22px; text-align:center;">Êó•Êú¨Ë™û ‚ûú Portugu√™s</div><div style="font-size:14px; color:#f0f0f0;">Kanji + Leitura - Tradu√ß√£o</div></button>
<button onclick="setModeAndGo('kanjiToPt')"><div style="font-size:22px;">Êó•Êú¨Ë™û ‚ûú Portugu√™s</div><div style="font-size:14px; color:#f0f0f0;">Kanji - Tradu√ß√£o</div></button><button onclick="setModeAndGo('kanjiToHira')"><div style="font-size:22px;">Ë™≠„ÅøÊñπ</div><div style="font-size:14px; color:#f0f0f0;">Kanji ‚ûú Hiragana</div></button><hr style="width: 80%; border-top: 1px solid #ccc; margin: 24px auto;"/><button onclick="showCustomMenu()">üéØ Escolher suas palavras</button><button onclick="show('addWordMenu')">‚úèÔ∏è Gerenciar Vocabul√°rio</button></div>
<div class="menu" id="categoryMenu">
<h2>Escolha uma categoria</h2>
<button onclick="selectCategory('Sinaliza√ß√£o e Transporte')">üö¶ Sinaliza√ß√£o e Transporte</button>
<button onclick="selectCategory('Locais P√∫blicos')">üè• Locais P√∫blicos</button>
<button onclick="selectCategory('Compras e Promo√ß√µes')">üõí Compras e Promo√ß√µes</button>
<button onclick="selectCategory('Casa e Escrit√≥rio')">üè† Casa e Escrit√≥rio</button>
<button onclick="selectCategory('Tecnologia e Comunica√ß√£o')">üì± Tecnologia e Comunica√ß√£o</button>
</div>
<div class="mode-select menu" id="modeMenu">
<h2>Escolha o modo</h2>
<button onclick="startGame('kanjiToPt')">Kanji ‚Üí Significado</button>
<button onclick="startGame('kanjiToHira')">Kanji ‚Üí Hiragana</button>
<button onclick="startGame('kanjiHiraToPt')">Kanji com Hiragana ‚Üí Significado</button>
</div>
<div class="game-screen menu" id="gameScreen">
<div id="question">?</div>
<div id="hiragana"></div>
<div class="options" id="options"></div>
<div id="progressBar"><div id="progress"></div></div>
<div id="progressText" style="margin-top:10px; font-size:14px; color:#333;"></div><button id="playAgainBtn" onclick="restartGame()" style="display:none; margin-top:20px;">üîÅ Jogar Novamente<div style="font-size:12px; color:#999;">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</div></button></div>
<script>const allData={"Sinaliza√ß√£o e Transporte": [{"jp": "Ê≠¢„Åæ„Çå","hira": "„Å®„Åæ„Çå","pt": "Pare"},{"jp": "‰∏ÄÊôÇÂÅúÊ≠¢","hira": "„ÅÑ„Å°„Åò„Å¶„ÅÑ„Åó","pt": "Parada obrigat√≥ria tempor√°ria"},{"jp": "ÈÄöË°åÊ≠¢","hira": "„Å§„ÅÜ„Åì„ÅÜ„Å©„ÇÅ","pt": "Via bloqueada"},{"jp": "ÈÄ≤ÂÖ•Á¶ÅÊ≠¢","hira": "„Åó„Çì„Å´„ÇÖ„ÅÜ„Åç„Çì„Åó","pt": "Entrada proibida"},{"jp": "ÂæêË°å","hira": "„Åò„Çá„Åì„ÅÜ","pt": "V√° devagar"},{"jp": "ÈßêËªäÁ¶ÅÊ≠¢","hira": "„Å°„ÇÖ„ÅÜ„Åó„ÇÉ„Åç„Çì„Åó","pt": "Proibido estacionar"},{"jp": "ÈßêËªäÂ†¥","hira": "„Å°„ÇÖ„ÅÜ„Åó„ÇÉ„Åò„Çá„ÅÜ","pt": "Estacionamento"},{"jp": "ÊúâÊñô","hira": "„ÇÜ„ÅÜ„Çä„Çá„ÅÜ","pt": "Pago"},{"jp": "ÁÑ°Êñô","hira": "„ÇÄ„Çä„Çá„ÅÜ","pt": "Gratuito"},{"jp": "Âà∂ÈôêÈÄüÂ∫¶","hira": "„Åõ„ÅÑ„Åí„Çì„Åù„Åè„Å©","pt": "Velocidade m√°xima"},{"jp": "ETC","hira": "„Ç§„Éº„ÉÜ„Ç£„Éº„Ç∑„Éº","pt": "Sistema eletr√¥nico de ped√°gio"},{"jp": "„Éë„Éº„Ç≠„É≥„Ç∞","hira": "„Éë„Éº„Ç≠„É≥„Ç∞","pt": "Estacionamento"},{"jp": "Ê®™Êñ≠Ê≠©ÈÅì","hira": "„Åä„ÅÜ„Å†„Çì„Åª„Å©„ÅÜ","pt": "Faixa de pedestre"},{"jp": "Ê≠©Ë°åËÄÖÂÑ™ÂÖà","hira": "„Åª„Åì„ÅÜ„Åó„ÇÉ„ÇÜ„ÅÜ„Åõ„Çì","pt": "Prioridade ao pedestre"},{"jp": "Ê≥®ÊÑè","hira": "„Å°„ÇÖ„ÅÜ„ÅÑ","pt": "Aten√ß√£o/Cuidado"},{"jp": "Â≠ê‰æõ","hira": "„Åì„Å©„ÇÇ","pt": "Crian√ßa"},{"jp": "Â∑•‰∫ã‰∏≠","hira": "„Åì„ÅÜ„Åò„Å°„ÇÖ„ÅÜ","pt": "Em obras"},{"jp": "ËêΩÁü≥Ê≥®ÊÑè","hira": "„Çâ„Åè„Åõ„Åç„Å°„ÇÖ„ÅÜ„ÅÑ","pt": "Cuidado: queda de pedras"},{"jp": "„Çπ„ÇØ„Éº„É´„Çæ„Éº„É≥","hira": "„Çπ„ÇØ„Éº„É´„Çæ„Éº„É≥","pt": "√Årea escolar"}],"Locais P√∫blicos": [{"jp": "Â§ß","hira": "„Å†„ÅÑ","pt": "Grande"},{"jp": "Â∞è","hira": "„Åó„Çá„ÅÜ","pt": "Pequeno"},{"jp": "Áî∑","hira": "„Åä„Å®„Åì","pt": "Homem"},{"jp": "Â•≥","hira": "„Åä„Çì„Å™","pt": "Mulher"},{"jp": "„Éà„Ç§„É¨","hira": "„Éà„Ç§„É¨","pt": "Banheiro"},{"jp": "„ÅäÊâãÊ¥ó„ÅÑ","hira": "„Åä„Å¶„ÅÇ„Çâ„ÅÑ","pt": "Lavabo/banheiro"},{"jp": "ÁóÖÈô¢","hira": "„Å≥„Çá„ÅÜ„ÅÑ„Çì","pt": "Hospital"},{"jp": "Ëñ¨","hira": "„Åè„Åô„Çä","pt": "Rem√©dio"},{"jp": "ÂÜÖÁßë","hira": "„Å™„ÅÑ„Åã","pt": "Cl√≠nica geral"},{"jp": "Â∞èÂÖêÁßë","hira": "„Åó„Çá„ÅÜ„Å´„Åã","pt": "Pediatria"},{"jp": "Âá¶ÊñπÁÆã","hira": "„Åó„Çá„Åª„ÅÜ„Åõ„Çì","pt": "Receita m√©dica"},{"jp": "„Éâ„É©„ÉÉ„Ç∞„Çπ„Éà„Ç¢","hira": "„Éâ„É©„ÉÉ„Ç∞„Çπ„Éà„Ç¢","pt": "Farm√°cia"}],"Compras e Promo√ß√µes": [{"jp": "Ââ≤Âºï","hira": "„Çè„Çä„Å≥„Åç","pt": "Desconto"},{"jp": "ÂçäÈ°ç","hira": "„ÅØ„Çì„Åå„Åè","pt": "Metade do pre√ßo"},{"jp": "ÁâπÂ£≤","hira": "„Å®„Åè„Å∞„ÅÑ","pt": "Promo√ß√£o especial"},{"jp": "„ÅäË≤∑„ÅÑÂæó","hira": "„Åä„Åã„ÅÑ„Å©„Åè","pt": "Boa compra"},{"jp": "ÂÆâ„ÅÑ","hira": "„ÇÑ„Åô„ÅÑ","pt": "Barato"},{"jp": "ÂÄ§‰∏ã„Åí","hira": "„Å≠„Åï„Åí","pt": "Redu√ß√£o de pre√ßo"},{"jp": "Âá¶ÂàÜ‰æ°Ê†º","hira": "„Åó„Çá„Å∂„Çì„Åã„Åã„Åè","pt": "Pre√ßo de liquida√ß√£o"},{"jp": "Êú¨Êó•Èôê„Çä","hira": "„Åª„Çì„Åò„Å§„Åã„Åé„Çä","pt": "Somente hoje"},{"jp": "Ê∂àË≤ªÊúüÈôê","hira": "„Åó„Çá„ÅÜ„Å≤„Åç„Åí„Çì","pt": "Prazo de consumo"},{"jp": "Ë≥ûÂë≥ÊúüÈôê","hira": "„Åó„Çá„ÅÜ„Åø„Åç„Åí„Çì","pt": "Prazo de melhor sabor"},{"jp": "Á®éËæº","hira": "„Åú„ÅÑ„Åì„Åø","pt": "Com imposto"},{"jp": "Á®éÂà•","hira": "„Åú„ÅÑ„Åπ„Å§","pt": "Sem imposto"},{"jp": "ÂêàË®à","hira": "„Åî„ÅÜ„Åë„ÅÑ","pt": "Total"},{"jp": "„Ç´„Éº„ÉâÂèØ","hira": "„Ç´„Éº„Éâ„Åã","pt": "Aceita cart√£o"},{"jp": "„Çª„Éº„É´","hira": "„Çª„Éº„É´","pt": "Liquida√ß√£o"},{"jp": "„Éù„Ç§„É≥„Éà","hira": "„Éù„Ç§„É≥„Éà","pt": "Pontos"}],"Casa e Escrit√≥rio": [{"jp": "Ê∞¥","hira": "„Åø„Åö","pt": "√Ågua"},{"jp": "ÁÅ´","hira": "„Å≤","pt": "Fogo"},{"jp": "ÁéÑÈñ¢","hira": "„Åí„Çì„Åã„Çì","pt": "Entrada da casa"},{"jp": "Èù¥","hira": "„Åè„Å§","pt": "Sapatos"},{"jp": "Èù¥„ÇíËÑ±„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ","hira": "„Åè„Å§„Çí„Å¨„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ","pt": "Por favor,tire os sapatos"},{"jp": "‰ΩøÁî®‰∏≠","hira": "„Åó„Çà„ÅÜ„Å°„ÇÖ„ÅÜ","pt": "Em uso"},{"jp": "ÊïÖÈöú‰∏≠","hira": "„Åì„Åó„Çá„ÅÜ„Å°„ÇÖ„ÅÜ","pt": "Quebrado/Fora de servi√ßo"},{"jp": "‰ºöË≠∞ÂÆ§","hira": "„Åã„ÅÑ„Åé„Åó„Å§","pt": "Sala de reuni√µes"},{"jp": "ÈùûÂ∏∏Âè£","hira": "„Å≤„Åò„Çá„ÅÜ„Åê„Å°","pt": "Sa√≠da de emerg√™ncia"},{"jp": "„Ç®„É¨„Éô„Éº„Çø„Éº","hira": "„Ç®„É¨„Éô„Éº„Çø„Éº","pt": "Elevador"},{"jp": "„Ç™„Éï„Ç£„Çπ","hira": "„Ç™„Éï„Ç£„Çπ","pt": "Escrit√≥rio"}],"Tecnologia e Comunica√ß√£o": [{"jp": "ÈÉµ‰æø","hira": "„ÇÜ„ÅÜ„Å≥„Çì","pt": "Correio"},{"jp": "ÈÉµ‰æøÁï™Âè∑","hira": "„ÇÜ„ÅÜ„Å≥„Çì„Å∞„Çì„Åî„ÅÜ","pt": "C√≥digo postal"},{"jp": "ÈÖçÈÅî","hira": "„ÅØ„ÅÑ„Åü„Å§","pt": "Entrega"},{"jp": "‰∏çÂú®","hira": "„Åµ„Åñ„ÅÑ","pt": "Ausente"},{"jp": "Èõª","hira": "„Åß„Çì","pt": "Eletricidade"},{"jp": "ÈõªË©±","hira": "„Åß„Çì„Çè","pt": "Telefone"},{"jp": "ÈõªËªä","hira": "„Åß„Çì„Åó„ÇÉ","pt": "Trem"},{"jp": "ÂÖÖÈõª‰∏≠","hira": "„Åò„ÇÖ„ÅÜ„Åß„Çì„Å°„ÇÖ„ÅÜ","pt": "Carregando"},{"jp": "Èñã„Åè","hira": "„Å≤„Çâ„Åè/„ÅÇ„Åè","pt": "Abrir"},{"jp": "Èñâ„Åò„Çã","hira": "„Å®„Åò„Çã","pt": "Fechar"},{"jp": "Wi-Fi","hira": "„Çè„ÅÑ„Åµ„ÅÅ„ÅÑ","pt": "Internet sem fio"},{"jp": "„Çπ„Éû„Éõ","hira": "„Åô„Åæ„Åª","pt": "Smartphone"},{"jp": "„Ç¢„Éó„É™","hira": "„Ç¢„Éó„É™","pt": "Aplicativo"}]};let currentCategory="";let currentMode="";let remaining=[];let total=0;let current=null;function show(id){document.querySelectorAll('.menu').forEach(el=>el.classList.remove('visible'));document.getElementById(id).classList.add('visible');}function selectCategory(cat){currentCategory=cat;show("modeMenu");}function startGame(mode){currentMode=mode;remaining=[...allData[currentCategory]].sort(()=>Math.random()-0.5);total=remaining.length;show("gameScreen");updateProgress();nextQuestion();}function nextQuestion(){if(remaining.length===0){document.getElementById('question').textContent="Parab√©ns!";document.getElementById('hiragana').textContent="";document.getElementById('options').innerHTML="";return;}current=remaining.shift();document.getElementById("question").textContent=current.jp;document.getElementById("hiragana").textContent=(currentMode==="kanjiHiraToPt")? current.hira : "";const correct=currentMode==="kanjiToPt" || currentMode==="kanjiHiraToPt" ? current.pt : current.hira;const options=[correct];while(options.length<4){const rand=allData[currentCategory][Math.floor(Math.random()*allData[currentCategory].length)];const distractor=currentMode==="kanjiToPt" || currentMode==="kanjiHiraToPt" ? rand.pt : rand.hira;if(!options.includes(distractor))options.push(distractor);}options.sort(()=>Math.random()-0.5);const container=document.getElementById("options");container.innerHTML="";options.forEach(opt=>{const btn=document.createElement("button");btn.textContent=opt;btn.onclick=()=>{if(opt===correct){btn.classList.add("correct");updateProgress();setTimeout(nextQuestion,500);}else{btn.classList.add("incorrect");}};container.appendChild(btn);});}function updateProgress(){const percent=100*(total-remaining.length)/total;document.getElementById("progress").style.width=percent+"%";}function showCustomMenu(){const list=document.getElementById("customWordList");list.innerHTML="";Object.entries(allData).forEach(([cat,words])=>{const group=document.createElement("div");const title=document.createElement("h3");title.textContent=cat;group.appendChild(title);words.forEach((item,index)=>{const label=document.createElement("label");label.style.display="block";const checkbox=document.createElement("input");checkbox.type="checkbox";checkbox.value=JSON.stringify(item);label.appendChild(checkbox);label.appendChild(document.createTextNode(` ${item.jp}(${item.pt})`));group.appendChild(label);});list.appendChild(group);});show("customMenu");}function startCustomGame(){const checkboxes=document.querySelectorAll("#customWordList input[type='checkbox']:checked");if(checkboxes.length===0){alert("Por favor,selecione pelo menos uma palavra.");return;}currentCategory="customSet";currentMode = document.getElementById("customModeSelect").value;remaining=Array.from(checkboxes).map(cb=>JSON.parse(cb.value)).sort(()=>Math.random()-0.5);total=remaining.length;show("gameScreen");updateProgress();nextQuestion();}let customData=[];function startCustomGame(){const checkboxes=document.querySelectorAll("#customWordList input[type='checkbox']:checked");if(checkboxes.length===0){alert("Por favor,selecione pelo menos uma palavra.");return;}currentCategory="customSet";currentMode = document.getElementById("customModeSelect").value;customData=Array.from(checkboxes).map(cb=>JSON.parse(cb.value));remaining=[...customData].sort(()=>Math.random()-0.5);total=remaining.length;show("gameScreen");updateProgress();nextQuestion();}const originalNextQuestion=nextQuestion;nextQuestion=function(){if(remaining.length===0){document.getElementById('question').textContent="Parab√©ns!";document.getElementById('hiragana').textContent="";document.getElementById('options').innerHTML="";return;}current=remaining.shift();document.getElementById("question").textContent=current.jp;document.getElementById("hiragana").textContent=(currentMode==="kanjiHiraToPt")? current.hira : "";const correct=currentMode==="kanjiToPt" || currentMode==="kanjiHiraToPt" ? current.pt : current.hira;const options=[correct];const sourcePool=(currentCategory==="customSet")? customData : allData[currentCategory];while(options.length<4){const rand=sourcePool[Math.floor(Math.random()*sourcePool.length)];const distractor=currentMode==="kanjiToPt" || currentMode==="kanjiHiraToPt" ? rand.pt : rand.hira;if(!options.includes(distractor))options.push(distractor);}options.sort(()=>Math.random()-0.5);const container=document.getElementById("options");container.innerHTML="";options.forEach(opt=>{const btn=document.createElement("button");btn.textContent=opt;btn.onclick=()=>{if(opt===correct){btn.classList.add("correct");updateProgress();setTimeout(nextQuestion,500);}else{btn.classList.add("incorrect");}};container.appendChild(btn);});};const savedData=localStorage.getItem("userWords");if(savedData){const userWords=JSON.parse(savedData);Object.entries(userWords).forEach(([cat,words])=>{if(!allData[cat])allData[cat]=[];allData[cat]=allData[cat].concat(words);});}function addNewWord(){const cat=document.getElementById("newCategory").value.trim();const jp=document.getElementById("newJP").value.trim();const hira=document.getElementById("newHira").value.trim();const pt=document.getElementById("newPT").value.trim();if(!cat || !jp || !hira || !pt){alert("Por favor,preencha todos os campos.");return;}const entry={jp,hira,pt};if(!allData[cat])allData[cat]=[];allData[cat].push(entry);let stored=localStorage.getItem("userWords");let userWords=stored ? JSON.parse(stored):{};if(!userWords[cat])userWords[cat]=[];userWords[cat].push(entry);localStorage.setItem("userWords",JSON.stringify(userWords));alert("Palavra adicionada com sucesso!");document.getElementById("newCategory").value="";document.getElementById("newJP").value="";document.getElementById("newHira").value="";document.getElementById("newPT").value="";show("categoryMenu");}function renderCategoryMenu(){const menu=document.getElementById("categoryMenu");const existingButtons=menu.querySelectorAll("button");existingButtons.forEach(btn=>btn.remove());Object.keys(allData).forEach(cat=>{const btn=document.createElement("button");btn.textContent=cat;btn.onclick=()=>selectCategory(cat);menu.appendChild(btn);});}window.onload=()=>{renderCategoryMenu();};function addNewWord(){const cat=document.getElementById("newCategory").value.trim();const jp=document.getElementById("newJP").value.trim();const hira=document.getElementById("newHira").value.trim();const pt=document.getElementById("newPT").value.trim();if(!cat || !jp || !hira || !pt){alert("Por favor,preencha todos os campos.");return;}const entry={jp,hira,pt};if(!allData[cat])allData[cat]=[];allData[cat].push(entry);let stored=localStorage.getItem("userWords");let userWords=stored ? JSON.parse(stored):{};if(!userWords[cat])userWords[cat]=[];userWords[cat].push(entry);localStorage.setItem("userWords",JSON.stringify(userWords));alert("Palavra adicionada com sucesso!");document.getElementById("newCategory").value="";document.getElementById("newJP").value="";document.getElementById("newHira").value="";document.getElementById("newPT").value="";renderCategoryMenu();show("categoryMenu");}function updateCategorySelect(){const select=document.getElementById("existingCategories");if(!select)return;select.innerHTML="";Object.keys(allData).sort().forEach(cat=>{const opt=document.createElement("option");opt.value=cat;opt.textContent=cat;select.appendChild(opt);});}function addNewWord(keepFilling=false){const select=document.getElementById("existingCategories");const inputCat=document.getElementById("newCategory").value.trim();const cat=inputCat || select.value;const jp=document.getElementById("newJP").value.trim();const hira=document.getElementById("newHira").value.trim();const pt=document.getElementById("newPT").value.trim();if(!cat || !jp || !hira || !pt){alert("Por favor,preencha todos os campos.");return;}const entry={jp,hira,pt};if(!allData[cat])allData[cat]=[];allData[cat].push(entry);let stored=localStorage.getItem("userWords");let userWords=stored ? JSON.parse(stored):{};if(!userWords[cat])userWords[cat]=[];userWords[cat].push(entry);localStorage.setItem("userWords",JSON.stringify(userWords));alert("Palavra adicionada com sucesso!");document.getElementById("newJP").value="";document.getElementById("newHira").value="";document.getElementById("newPT").value="";if(!keepFilling){document.getElementById("newCategory").value="";renderCategoryMenu();show("categoryMenu");}else{updateCategorySelect();}}const originalShow=show;
show=function(id){
  if(id==="addWordMenu"){
    updateCategorySelect();
    setTimeout(updateWordDropdown, 100);
  }
  originalShow(id);
};

function setModeAndGo(mode) {
  currentMode = mode;
  renderCategoryMenu();
  show('categoryMenu');
}

function selectCategory(cat) {
  currentCategory = cat;
  startGame(currentMode);
}

function updateProgress() {
  const percent = 100 * (total - remaining.length)
